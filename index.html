<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOOMINAR "তোদের বন্ধু তানিম"</title>
    <link rel="stylesheet" href="index.css">
    <script type="importmap">
      {
        "imports": {
          "@google/genai": "https://esm.sh/@google/genai@^1.4.0"
        }
      }
    </script>
</head>
<body>
    <div id="initial-loader" class="loader-overlay">
        <div class="loader"></div>
        <p>Loading Design Studio...</p>
    </div>

    <main class="container" id="main-container" style="display: none;">
        <header class="header">
            <h1>LOOMINAR</h1>
            <h2>"তোদের বন্ধু তানিম"</h2>
            <p>Bring your ideas to life with AI-generated images.</p>
        </header>

        <div class="card">
            <label for="prompt-input">Prompt</label>
            <textarea id="prompt-input" rows="10" placeholder="Describe the image you want to create..." spellcheck="true"></textarea>
            <div class="prompt-guide">
                <strong>Pro Tip:</strong> For best results, be descriptive! Include details like style (e.g., photorealistic, cartoon), colors, lighting, and composition.
            </div>
            
            <div class="input-row">
                <div class="upload-section">
                    <label for="logo-upload-input">Upload Image (Optional)</label>
                    <div class="upload-controls">
                        <label for="logo-upload-input" class="button-like-label">Choose File</label>
                        <input type="file" id="logo-upload-input" accept="image/png, image/jpeg" hidden>
                        <div id="logo-preview-container">
                            <img id="logo-preview" src="" alt="Logo preview"/>
                            <span id="logo-filename"></span>
                            <button id="remove-logo-button" aria-label="Remove logo">&times;</button>
                        </div>
                    </div>
                    <p class="upload-note">Use `[LOGO]` in your prompt to place the logo.</p>
                </div>
                <div class="market-select-section">
                    <label for="market-select">Target Market</label>
                    <select id="market-select">
                        <option value="Bangladesh">Bangladesh</option>
                        <option value="USA">USA</option>
                        <option value="UK">UK</option>
                        <option value="India">India</option>
                        <option value="Nigeria">Nigeria</option>
                    </select>
                </div>
            </div>

            <div class="button-group">
                <button id="generate-button">Generate & Analyze</button>
            </div>

            <div id="quota-error">
                <p>You are out of quota. Please <button id="open-key">get a new API key</button> to continue.</p>
            </div>
        </div>
        
        <div class="card result-card">
            <h2>AI-Powered Design & Analysis</h2>
            <div id="status" aria-live="polite"></div>
            <div class="image-container">
                <img id="generated-image" alt="Generated image">
                <div class="loader" id="loader"></div>
            </div>

            <div id="design-details-container" class="design-details" style="display: none;">
                <h3>Design Notes for <span id="design-details-id"></span></h3>
                <p><strong>Summary:</strong> <span id="design-details-summary"></span></p>
                <div id="design-details-notes-wrapper" style="display: none;">
                    <p><strong>Details:</strong></p>
                    <p id="design-details-notes"></p>
                </div>
                 <div id="design-details-review-wrapper" style="display: none;">
                    <p><strong>Review Feedback:</strong></p>
                    <p id="design-details-review"></p>
                </div>
            </div>

            <div class="studio-container" id="studio-container">
                <h3>LOOMINAR ⚡ Studio</h3>
                <nav class="tab-nav">
                    <button class="tab-button active" data-tab="dna">Product DNA</button>
                    <button class="tab-button" data-tab="branding">Branding & Identity</button>
                    <button class="tab-button" data-tab="seo">Region-Aware SEO & SEM</button>
                </nav>

                <div id="tab-dna" class="tab-content studio-grid" style="display: grid;">
                    <ul id="dna-specs-list"></ul>
                    <div class="info-block">
                        <h3>Pricing Strategy</h3>
                        <p id="dna-pricing-content"></p>
                    </div>
                     <div class="info-block">
                        <h3>Logistics Overview</h3>
                        <p id="dna-logistics-content"></p>
                    </div>
                </div>

                <div id="tab-branding" class="tab-content" style="display: none;">
                    <div class="info-block">
                        <h3>Brand Archetype</h3>
                        <p><strong id="branding-archetype"></strong></p>
                    </div>
                    <br>
                    <div class="info-block">
                        <h3>Brand Voice</h3>
                        <p id="branding-voice"></p>
                    </div>
                    <br>
                    <div class="info-block">
                        <h3>AI Logo Feedback</h3>
                        <p id="branding-logo-feedback"></p>
                    </div>
                </div>

                <div id="tab-seo" class="tab-content" style="display: none;">
                   <div class="seo-grid">
                        <div class="seo-rate-display">
                            <span id="seo-rate-score" class="score"></span>
                            <span class="score-label">SEO Rate / 100</span>
                            <p id="seo-rate-analysis"></p>
                        </div>
                        <div class="info-block">
                            <h3>Targeted Keywords</h3>
                            <div id="seo-keywords" class="keyword-list"></div>
                        </div>
                   </div>
                   <br>
                   <div class="info-block">
                        <h3>SEM Ad Copy</h3>
                        <div class="ad-preview">
                            <strong id="sem-ad-headline"></strong>
                            <p id="sem-ad-description"></p>
                        </div>
                   </div>
                   <br>
                   <div class="info-block">
                        <h3>SEO Meta Description</h3>
                        <p id="seo-meta-description"></p>
                   </div>
                   <br>
                    <div class="info-block">
                        <h3>Social Media Prompts</h3>
                        <ul id="seo-social-prompts"></ul>
                    </div>
                </div>
                <div id="studio-sources"></div>
            </div>
        </div>

        <div class="card" id="store-card">
            <h2>My Store</h2>
            <div id="store-grid"></div>
        </div>

        <div class="card" id="history-card">
            <h2>Design History</h2>
            <ul id="history-list"></ul>
        </div>
    </main>

    <div id="proposal-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content card">
            <h2>Propose a Design Change</h2>
            <p>Describe the changes you're making to this design, similar to a commit message.</p>
            <label for="change-summary">Change Summary (Title)</label>
            <input type="text" id="change-summary" placeholder="e.g., 'Feat: Add a more vibrant color scheme'">
            <label for="design-notes">Design Notes (Optional)</label>
            <textarea id="design-notes" rows="4" placeholder="Explain the problem this change is solving and why you are making it."></textarea>
            <div class="button-group">
                <button id="propose-button">Generate & Iterate</button>
                <button id="cancel-proposal-button" class="secondary-button">Cancel</button>
            </div>
        </div>
    </div>

    <div id="review-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content card">
            <h2>Review Design Change</h2>
            <p>Review the proposed changes and provide feedback before approving or rejecting.</p>
            <div class="review-proposal-details">
                <p><strong>Summary:</strong> <span id="review-summary"></span></p>
                <p><strong>Notes:</strong> <span id="review-notes"></span></p>
            </div>
            <label for="review-comments">Review Comments (Optional)</label>
            <textarea id="review-comments" rows="4" placeholder="e.g., 'LGTM! Great improvement.'"></textarea>
            <div class="button-group">
                <button id="approve-button">Approve</button>
                <button id="reject-button">Reject</button>
                <button id="cancel-review-button" class="secondary-button">Cancel</button>
            </div>
        </div>
    </div>


    <script type="module" src="index.tsx"></script>
</body>
</html>