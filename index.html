<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOOMINAR "‡¶§‡ßã‡¶¶‡ßá‡¶∞ ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ ‡¶§‡¶æ‡¶®‡¶ø‡¶Æ"</title>
    <link rel="stylesheet" href="index.css">
    <script type="importmap">
      {
        "imports": {
          "@google/genai": "https://esm.sh/@google/genai@^1.4.0"
        }
      }
    </script>
</head>
<body>
    <div id="initial-loader" class="loader-overlay">
        <div class="loader"></div>
        <p>Loading Design Studio...</p>
    </div>

    <div class="app-container" style="opacity: 0;">
        <aside class="sidebar">
            <header class="sidebar-header">
                <h1>LOOMINAR</h1>
                <h2>"‡¶§‡ßã‡¶¶‡ßá‡¶∞ ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ ‡¶§‡¶æ‡¶®‡¶ø‡¶Æ"</h2>
            </header>

            <div class="sidebar-content">
                <section class="control-section">
                    <label for="prompt-input">Prompt</label>
                    <div class="prompt-wrapper">
                        <textarea id="prompt-input" rows="8" placeholder="Describe or speak your vision..."></textarea>
                        <button id="mic-button" aria-label="Use voice input">üé§</button>
                    </div>
                    <div class="prompt-guide">
                        <strong>Pro Tip:</strong> Be descriptive! Include style (e.g., photorealistic), colors, lighting, and composition.
                    </div>
                </section>

                <section class="control-section">
                    <label for="logo-upload-input">Upload Image (Optional)</label>
                    <div class="upload-controls">
                        <label for="logo-upload-input" class="button-like-label">Choose File</label>
                        <input type="file" id="logo-upload-input" accept="image/png, image/jpeg" hidden>
                        <div id="logo-preview-container">
                            <img id="logo-preview" src="" alt="Logo preview"/>
                            <span id="logo-filename"></span>
                            <button id="remove-logo-button" aria-label="Remove logo">&times;</button>
                        </div>
                    </div>
                    <p class="upload-note">Use `[LOGO]` in your prompt to place the logo.</p>
                </section>
                
                 <section class="control-section">
                    <button id="camera-button" class="secondary-button" style="width: 100%;">üì∏ Capture Inspiration</button>
                </section>

                <section class="control-section">
                     <label for="market-select">Target Market</label>
                    <select id="market-select">
                        <option value="Bangladesh">Bangladesh</option>
                        <option value="USA">USA</option>
                        <option value="UK">UK</option>
                        <option value="India">India</option>
                        <option value="Nigeria">Nigeria</option>
                    </select>
                </section>

                <section class="control-section generate-section">
                     <button id="generate-button">Generate & Analyze</button>
                </section>

                 <div id="quota-error">
                    <p>You are out of quota. Please <button id="open-key">get a new API key</button> to continue.</p>
                </div>
                
                <hr class="divider" />

                <section class="control-section">
                    <h3>My Store</h3>
                    <div id="store-grid"></div>
                    <div id="store-empty-state" class="empty-state">
                        <p>Published designs will appear here.</p>
                    </div>
                </section>

                <hr class="divider" />

                <section class="control-section">
                    <h3>Design History</h3>
                    <ul id="history-list"></ul>
                    <div id="history-empty-state" class="empty-state">
                         <p>Your generated designs will appear here.</p>
                    </div>
                </section>

            </div>
        </aside>

        <main class="main-content">
             <div id="status"></div>
            <div id="welcome-screen">
                <h2>Welcome to the Studio</h2>
                <p>Describe your vision in the prompt panel to get started.</p>
            </div>
            <div id="result-display" style="display: none;">
                <div class="image-container">
                    <img id="generated-image" alt="Generated image">
                    <div class="loader" id="loader"></div>
                </div>

                <div id="design-details-container" class="design-details">
                    <h3>Design Notes for <span id="design-details-id"></span></h3>
                    <p><strong>Summary:</strong> <span id="design-details-summary"></span></p>
                    <div id="design-details-notes-wrapper">
                        <p><strong>Details:</strong></p>
                        <p id="design-details-notes"></p>
                    </div>
                     <div id="design-details-review-wrapper">
                        <p><strong>Review Feedback:</strong></p>
                        <p id="design-details-review"></p>
                    </div>
                </div>

                <div class="studio-container" id="studio-container">
                    <nav class="tab-nav">
                        <button class="tab-button active" data-tab="dna">Product DNA</button>
                        <button class="tab-button" data-tab="branding">Branding</button>
                        <button class="tab-button" data-tab="seo">SEO/SEM</button>
                        <button class="tab-button" data-tab="ecommerce">E-commerce</button>
                        <button class="tab-button" data-tab="manufacturing">Manufacturing</button>
                        <button class="tab-button" data-tab="buzz">Social Buzz</button>
                    </nav>

                    <div id="tab-dna" class="tab-content active">
                        <ul id="dna-specs-list" class="studio-grid"></ul>
                        <div class="studio-grid">
                            <div class="info-block">
                                <h3>Pricing Strategy</h3>
                                <div id="dna-pricing-content"></div>
                            </div>
                             <div class="info-block">
                                <h3>Logistics Overview</h3>
                                <div id="dna-logistics-content"></div>
                            </div>
                        </div>
                    </div>

                    <div id="tab-branding" class="tab-content">
                       <div class="studio-grid">
                            <div class="info-block">
                                <h3>Brand Archetype</h3>
                                <p><strong id="branding-archetype"></strong></p>
                            </div>
                            <div class="info-block">
                                <h3>Brand Voice</h3>
                                <p id="branding-voice"></p>
                            </div>
                       </div>
                        <div class="info-block">
                            <h3>AI Logo Feedback</h3>
                            <p id="branding-logo-feedback"></p>
                        </div>
                    </div>

                    <div id="tab-seo" class="tab-content">
                       <div class="seo-grid">
                            <div class="seo-rate-display">
                                <svg class="seo-rate-svg" viewBox="0 0 100 100">
                                  <circle class="seo-rate-bg" cx="50" cy="50" r="45"></circle>
                                  <circle id="seo-rate-circle" class="seo-rate-fg" cx="50" cy="50" r="45"></circle>
                                </svg>
                                <span id="seo-rate-score" class="score"></span>
                                <span class="score-label">SEO Rate</span>
                            </div>
                            <div class="info-block">
                                <h3>SEO Rate Analysis</h3>
                                <p id="seo-rate-analysis"></p>
                            </div>
                       </div>
                       <div class="info-block">
                           <h3>Targeted Keywords</h3>
                           <div id="seo-keywords" class="keyword-list"></div>
                       </div>
                       <div class="studio-grid">
                            <div class="info-block">
                                <h3>SEM Ad Copy</h3>
                                <div class="ad-preview">
                                    <strong id="sem-ad-headline"></strong>
                                    <p id="sem-ad-description"></p>
                                </div>
                           </div>
                           <div class="info-block">
                                <h3>SEO Meta Description</h3>
                                <p id="seo-meta-description"></p>
                           </div>
                       </div>
                        <div class="info-block">
                            <h3>Social Media Prompts</h3>
                            <ul id="seo-social-prompts"></ul>
                        </div>
                    </div>

                    <div id="tab-ecommerce" class="tab-content">
                        <div class="info-block">
                            <h3>Product Title</h3>
                            <p><strong id="ecom-title"></strong></p>
                        </div>
                        <div class="info-block">
                            <h3>Product Description</h3>
                            <p id="ecom-description"></p>
                        </div>
                        <div class="studio-grid">
                            <div class="info-block">
                                <h3>SKU (Stock Keeping Unit)</h3>
                                <code id="ecom-sku"></code>
                            </div>
                            <div class="info-block">
                                <h3>GTIN (Unique Identifier)</h3>
                                <p id="ecom-gtin"></p>
                            </div>
                        </div>
                        <div class="info-block">
                            <h3>Google Product Category</h3>
                            <p id="ecom-category"></p>
                        </div>
                    </div>
                    
                    <div id="tab-manufacturing" class="tab-content">
                        <div class="info-block">
                            <h3>Potential Manufacturers</h3>
                            <div id="man-manufacturers" class="studio-grid"></div>
                        </div>
                        <div class="info-block">
                            <h3>Similar Product Ideas</h3>
                            <ul id="man-similar-products"></ul>
                        </div>
                        <div class="info-block">
                            <h3>B2B Search Keywords</h3>
                            <div id="man-b2b-keywords" class="keyword-list"></div>
                        </div>
                    </div>


                    <div id="tab-buzz" class="tab-content">
                       <div class="buzz-grid">
                            <div class="sentiment-display">
                               <span id="buzz-sentiment" class="sentiment-badge"></span>
                               <p id="buzz-sentiment-analysis"></p>
                            </div>
                            <div class="info-block">
                                <h3>Key Influencers / Archetypes</h3>
                                <div id="buzz-influencers"></div>
                            </div>
                       </div>
                        <div class="info-block">
                            <h3>Viral Content Ideas</h3>
                            <ul id="buzz-content-ideas"></ul>
                        </div>
                        <div class="info-block">
                            <h3>Relevant Hashtags</h3>
                            <div id="buzz-hashtags" class="keyword-list"></div>
                        </div>
                    </div>

                    <div id="studio-sources"></div>
                </div>
            </div>
        </main>
    </div>


    <div id="proposal-modal" class="modal-overlay">
        <div class="modal-content card">
            <h2>Propose a Design Change</h2>
            <p>Describe the changes you're making to this design, similar to a commit message.</p>
            <label for="change-summary">Change Summary (Title)</label>
            <input type="text" id="change-summary" placeholder="e.g., 'Feat: Add a more vibrant color scheme'">
            <label for="design-notes">Design Notes (Optional)</label>
            <textarea id="design-notes" rows="4" placeholder="Explain the problem this change is solving and why you are making it."></textarea>
            <div class="button-group">
                <button id="propose-button">Generate & Iterate</button>
                <button id="cancel-proposal-button" class="secondary-button">Cancel</button>
            </div>
        </div>
    </div>

    <div id="review-modal" class="modal-overlay">
        <div class="modal-content card">
            <h2>Review Design Change</h2>
            <p>Review the proposed changes and provide feedback before approving or rejecting.</p>
            <div class="review-proposal-details">
                <p><strong>Summary:</strong> <span id="review-summary"></span></p>
                <p><strong>Notes:</strong> <span id="review-notes"></span></p>
            </div>
            <label for="review-comments">Review Comments (Optional)</label>
            <textarea id="review-comments" rows="4" placeholder="e.g., 'LGTM! Great improvement.'"></textarea>
            <div class="button-group">
                <button id="approve-button">Approve</button>
                <button id="reject-button">Reject</button>
                <button id="cancel-review-button" class="secondary-button">Cancel</button>
            </div>
        </div>
    </div>
    
    <div id="camera-modal" class="modal-overlay">
        <div class="modal-content card">
            <h2>Capture Inspiration</h2>
            <p>Point your camera at something inspiring to extract a color palette.</p>
            <video id="camera-video" autoplay playsinline></video>
            <div id="camera-loader" class="loader"></div>
            <div id="palette-container"></div>
            <div class="button-group">
                <button id="capture-button">Capture & Analyze</button>
                <button id="cancel-camera-button" class="secondary-button">Close</button>
            </div>
        </div>
    </div>


    <script type="module" src="index.tsx"></script>
</body>
</html>