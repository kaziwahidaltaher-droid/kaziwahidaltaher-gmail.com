<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="An interactive 3D galaxy simulation with advanced visual effects and AI integration."
    />
    <title>Cosmic Simulation</title>
    <link rel="stylesheet" href="index.css" />
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" href="icon.svg" type="image/svg+xml" />

    <script type="importmap">
{
  "imports": {
    "three": "https://aistudiocdn.com/three@0.179.1",
    "@google/genai": "https://aistudiocdn.com/@google/genai@1.15.0",
    "lit": "https://aistudiocdn.com/lit@3.3.1",
    "lit/": "https://aistudiocdn.com/lit@3.3.1/",
    "three/": "https://aistudiocdn.com/three@0.179.1/",
    "classnames": "https://aistudiocdn.com/classnames@2.5.1",
    "react": "https://esm.sh/react@18.2.0",
    "react-dom": "https://esm.sh/react-dom@18.2.0",
    "react/": "https://aistudiocdn.com/react@^19.1.1/"
  }
}
</script>
  </head>
  <body>
    <canvas id="bg"></canvas>

    <div id="top-right-controls">
        <button id="toggle-phantom-btn" class="generation-btn" aria-label="Toggle Phantom">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            <span>PHANTOM</span>
        </button>
        <button id="summon-probe-btn" class="generation-btn" aria-label="Summon AI Probe">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12s4.48 10 10 10 10-4.48 10-10zm-10 8c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/><path d="M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM4.93 4.93l1.41 1.41C7.89 4.79 9.85 4 12 4s4.11.79 5.66 2.34l1.41-1.41C17.39 3.26 14.83 2 12 2S6.61 3.26 4.93 4.93z"/></svg>
            <span>SUMMON PROBE</span>
        </button>
        <div id="generation-container">
            <button id="generate-cosmos-standard-btn" class="generation-btn" aria-label="Generate Standard Cosmos">
                <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 0 24 24" width="20px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5s-2.24-5-5-5c-1.25 0-2.42.47-3.32 1.26C12.25 6.47 11.4 5.5 11.4 4.5c0-.83.67-1.5 1.5-1.5zm-6.5 9c0-3.59 2.91-6.5 6.5-6.5s6.5 2.91 6.5 6.5-2.91 6.5-6.5 6.5S5.5 15.59 5.5 12z"/></svg>
                <span>Standard Cosmos</span>
            </button>
             <button id="generate-cosmos-spe-btn" class="generation-btn" aria-label="Generate Solar Flare Environment">
                <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="20px" viewBox="0 0 24 24" width="20px" fill="#FFFFFF"><g><rect fill="none" height="24" width="24"/></g><g><g><path d="M11,6.5c-0.42,0-0.81,0.12-1.16,0.32C9.43,6.44,8.71,6,7.85,6C6.55,6,5.5,7.05,5.5,8.35c0,0.61,0.24,1.17,0.63,1.57 c-0.5,0.43-0.84,1.05-0.98,1.75C5.07,11.6,5,11.53,5,11.45c0-1.18-0.96-2.14-2.14-2.14S0.72,10.27,0.72,11.45 c0,0.73,0.37,1.37,0.94,1.75c-0.08,0.4-0.16,0.78-0.16,1.16c0,2.35,1.91,4.26,4.26,4.26c0.59,0,1.15-0.12,1.66-0.34 c0.33,0.78,1.02,1.38,1.87,1.63C9.46,20.59,10.18,21,11,21c2.35,0,4.26-1.91,4.26-4.26c0-0.11-0.01-0.22-0.02-0.33 c0.68-0.1,1.32-0.4,1.87-0.84c0.55,0.44,1.25,0.71,2.02,0.71c1.47,0,2.67-1.2,2.67-2.67s-1.2-2.67-2.67-2.67 c-0.65,0-1.23,0.24-1.69,0.62c0.1-0.67,0.02-1.37-0.24-2c0.7-0.05,1.35-0.37,1.84-0.87c0.47,0.32,1.02,0.5,1.61,0.5 c1.38,0,2.5-1.12,2.5-2.5s-1.12-2.5-2.5-2.5c-1.11,0-2.06,0.73-2.37,1.72C13.52,7.3,12.42,6.5,11,6.5z"/></g></g></svg>
                <span>Solar Flare Event</span>
            </button>
             <button id="generate-cosmos-lunar-btn" class="generation-btn" aria-label="Generate Lunar Environment">
                <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 0 24 24" width="20px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M11.64 2.21c-.39-.12-.8-.1-.1.15l.1.15c4.1 4.1 4.1 10.74 0 14.85l-1.04 1.03c-1.33 1.33-3.11 2.05-4.99 2.05-1.89 0-3.67-.72-5.01-2.05l-.01-.01c-2.73-2.73-2.73-7.17 0-9.9l1.04-1.03c1.33-1.33 3.11-2.05 4.99-2.05s3.67.72 5.01 2.05l1.03 1.03c.39.39.39 1.02 0 1.41l-1.18 1.18c-.28.28-.71.35-1.06.14-.3-.18-.5-.51-.5-.87V8.58c0-.88-.72-1.6-1.6-1.6H8.58c-.36 0-.69-.2-.87-.5-.14-.36-.07-.78.14-1.06l1.18-1.18c.39-.39 1.02-.39 1.41 0l1.03 1.03c1.95 1.95 1.95 5.12 0 7.07l-1.03 1.03c-.78.78-1.82 1.2-2.92 1.2-1.1 0-2.14-.42-2.92-1.2l-.01-.01c-1.6-1.6-1.6-4.2 0-5.8l1.03-1.03c.39-.39 1.02-.39 1.41 0l1.18 1.18c.28.28.71.35 1.06.14.3-.18.5-.51-.5-.87V5.59c0-1.03.42-1.99 1.1-2.67.3-.29.61-.55.93-.78l.05-.03z"/></svg>
                <span>Lunar Environment</span>
            </button>
             <button id="generate-cosmos-martian-btn" class="generation-btn" aria-label="Generate Martian Environment">
                <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 0 24 24" width="20px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-6-8c0-3.31 2.69-6 6-6s6 2.69 6 6-2.69 6-6 6-6-2.69-6-6z"/></svg>
                <span>Martian Environment</span>
            </button>
        </div>
    </div>
    
    <div id="telemetry-ticker"></div>
    
    <div id="ccs-panel">
        <div class="ccs-item"><span>MODE</span><span id="ccs-mode">IDLE</span></div>
        <div class="ccs-item"><span>CAM POS</span><span id="ccs-pos">0.0, 0.0, 0.0</span></div>
        <div class="ccs-item"><span>CAM VEL</span><span id="ccs-vel">0.0 u/s</span></div>
        <div class="ccs-item"><span>CAM TGT</span><span id="ccs-target">0.0, 0.0, 0.0</span></div>
        <div class="ccs-item"><span>STATUS</span><span id="ccs-status" class="nominal">NOMINAL</span></div>
        <button id="auto-focus-btn" aria-label="Seek Anomaly">SEEK ANOMALY</button>
    </div>

    <div id="response-container" class="hidden">
        <div id="response-text"></div>
        <div id="response-actions"></div>
        <button id="close-response-btn" aria-label="Close response">&times;</button>
    </div>

    <div id="tts-settings-panel" class="hidden">
      <h3>Voice Settings</h3>
      <div class="setting-item">
          <label for="voice-select">VOICE</label>
          <select id="voice-select"></select>
      </div>
      <div class="setting-item">
          <label for="pitch-slider">PITCH: <span id="pitch-value">1.0</span></label>
          <input type="range" id="pitch-slider" min="0" max="2" step="0.1" value="1">
      </div>
      <div class="setting-item">
          <label for="rate-slider">SPEED: <span id="rate-value">1.0</span></label>
          <input type="range" id="rate-slider" min="0.1" max="2" step="0.1" value="1">
      </div>
      <button id="close-tts-settings-btn" aria-label="Close voice settings">&times;</button>
    </div>

    <div id="mission-modal" class="hidden">
        <h3>Mission Simulation</h3>
        <p>Dispatch phantom on a simulated transit through the current environment with a specified Solar Energetic Particle (SEP) hazard level.</p>
        <div class="mission-actions">
            <button id="run-mission-nominal" class="mission-btn">Nominal Transit</button>
            <button id="run-mission-worst-day" class="mission-btn">SEP Hazard: Worst-Day</button>
            <button id="run-mission-worst-week" class="mission-btn">SEP Hazard: Worst-Week</button>
            <button id="run-mission-peak-flux" class="mission-btn">SEP Hazard: Peak Flux</button>
        </div>
        <button id="close-mission-modal-btn" aria-label="Close mission simulation">&times;</button>
    </div>

    <div id="react-app-root"></div>


    <div id="controls">
       <button id="tts-settings-btn" aria-label="Open voice settings">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 9v6h4l5 5V4L7 9H3zm7 .17v5.66L8.17 13H5v-2h3.17L10 9.17zM14.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM19 12c0 2.21-.91 4.2-2.36 5.64l-1.42-1.42C16.45 15 17 13.57 17 12s-.55-3-1.78-4.22l1.42-1.42C18.09 7.8 19 9.79 19 12z"/></svg>
       </button>
       <form id="prompt-form">
          <input type="text" id="prompt-input" placeholder="Ask the cosmos..." autocomplete="off" />
          <button type="submit" id="prompt-btn" aria-label="Submit prompt">
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M3.4 20.4l17.45-7.48c.81-.35.81-1.49 0-1.84L3.4 3.6c-.66-.29-1.39.2-1.39.91L2 9.12c0 .5.37.93.87.99L17 12 2.87 13.88c-.5.07-.87.5-.87 1l.01 4.61c0 .71.73 1.2 1.39.91z"/></svg>
          </button>
      </form>
    </div>
    <script type="module" src="index.tsx"></script>
  </body>
</html>